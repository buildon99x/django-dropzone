from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
import os 
from . import views


if (settings.DEBUG):
    if (settings.STATIC_ROOT is None):
        static_root = os.path.join(settings.BASE_DIR, 'static')
    else:
        static_root = settings.STATIC_ROOT
        
    if (settings.STATIC_ROOT is None):
        media_root = os.path.join(settings.BASE_DIR, 'madia')
    else:
        media_root = settings.MEDIA_ROOT
        
    print (f"STATIC_URL : {settings.STATIC_URL}")
    print (f"STATIC_ROOT : {static_root}")
    print (f"{static('/static/', document_root=static_root) }" )
    
    static_urls = static('/static/', document_root=static_root) + static('/madia/', document_root=media_root)
else:
    static_urls = []

urlpatterns = [
    path('fileserver/', include([ 
            path('uploadview/', views.IndexView.as_view()),
            path('upload/', views.file_upload),
            path('list/', views.LogFileListView.as_view(http_method_names=['post','get'])),
        ] + static_urls #+ static('/static/', document_root=static_root) + static('/madia/', document_root=media_root)
        )),
    #path('fileserver/', views.IndexView.as_view()),
    #path('list/', views.LogFileListView.as_view(http_method_names=['post','get'])),
# path('upload/', views.file_upload),
]
